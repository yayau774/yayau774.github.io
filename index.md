# Pagesによる日記だ
[まーくあっぷの例](https://docs.github.com/ja/get-started/writing-on-github/getting-started-with-writing-and-formatting-on-github/basic-writing-and-formatting-syntax)

## log
[24-09-xx](./2409.md)  
[24-10-xx](./2410.md)

## 24-11-22
50+15呼吸。50までいったのは初めてかな？　いつもより食後の時間をとってから出たから負担が少なかったのかも。  
お散歩中に流れ星が見えた……ような気がする。

クッキーを使ったJWT認証が出来たはず。  
```typescript
import type { Context } from "hono";
import type { CookieOptions } from "hono/utils/cookie";
import { deleteCookie, setSignedCookie } from "hono/cookie";

/**
 * 
 * 参考
 * https://hono.dev/docs/getting-started/cloudflare-workers#using-variables-in-middleware
 * 
 * くっきー保存するとき
 * await setAuthCookie(c, "cookie-name", "jwt-string")
 * 
 * くっきーを削除するとき
 * deleteAuthCookie(c, "cookie-name")
 * 
 * くっきーをjwt-authに渡すとき
 * import { jwt } from 'hono/jwt'
 * app.use('path', async (c, next) => {
 *   const jwtOption = {
 *     secret: jwt-secret
 *     cookie: getAuthCookieOption(c, "cookie-name")
 *   }
 *   const auth = jwt(jwtOption)
 *   return auth(c, next)
 * })
 * 
 */

const secureCookieOption: CookieOptions = {
  httpOnly: true,
  maxAge: 1000,
  sameSite: "strict",
  secure: true,
  prefix: "host",
};

export const setAuthCookie = async (c: Context, key: string, jwt: string) => {
  await setSignedCookie(c, key, jwt, c.env.COOKIE_SECRET, secureCookieOption );
}

export const deleteAuthCookie = (c: Context, key: string) => {
  deleteCookie(c, key, secureCookieOption);
}

export const getAuthCookieOption = (c: Context, key: string) => {
  return {
    key,
    secret: c.env.COOKIE_SECRET,
    prefixOptions: secureCookieOption.prefix
  }
}
```

昨日も今日もなんかうまく眠れてないなー。

DQ3リメイク、大魔王ゾーマの生配信とかやってて笑っちゃった。バラモスもいるし。

## 24-11-21
30+15呼吸。新しい冬靴は夏靴より重さを感じる。まだちょっと堅いけどそのうち柔らかくなるかなー。

認証方式。ブラウザからのアクセスだと、Authorizationヘッダーはfetchとかの時しかつけられなさそうだ。クッキーでやるかあ。

[303 See Other](https://developer.mozilla.org/ja/docs/Web/HTTP/Status/303)  
こんなんあるんや！　使うことがあるかもしれない。

背中はだいぶ良くなった気がする。

## 24-11-20
0呼吸。あしたは路面状況良くなるかなー。

認証方式。  
- セッション: ブラウザ側にIDだけ持たせて、サーバー側でIDに紐づけられた情報を見る。
- トークン: ブラウザ側にいろんな情報を持たせて暗号化し、サーバー側で復号してその情報を利用する。  
  - リクエストヘッダーのAuthorizationにトークンを持たせてサーバーに渡すのがいいらしい。
Honoだとクッキーをよりセキュアな形にしてどうのこうの……という形でもできるようだけど、うーんむずかしい。

日記用のシステムを作ってみようかなと思って色々調べているのだ。

## 24-11-19
0呼吸。雪。

さほどでもないやろと甘く見てたら結構ガチ目の降雪。  
べた雪だったせいもあって、除雪でまた背中が悪化したかんじなんだが？

Honoちょっとわかってきた。  
JSXrendererでbodyの外を作って、コンポーネントにしたbodyに処理したpropsを渡すかんじでいいかな。  
クライアントサイドのjsはstaticに作るなり、hono/htmlを利用してscriptのコンポーネントにしてJSXrendererに入れるなり。

issueでコメントくるのびっくりしちゃった。確かに全体に公開されてるけども。

## 24-11-18
0呼吸。雪のために以下略。

JSXむずかしい！　async/awaitもむずかしい！  
TypeScriptもむずかしいけど、こっちは型が間違ってるからどうにかしてくれよということが分かりやすい。

はーげんだっついっぱいもらった。

背中はマシになってきた。

## 24-11-17
0呼吸。雨のゆえお散歩もしていない。

Hono + Cloudflare Pages でTodoアプリを作ってみつつある。  
サーバーサイドレンダリングとクライアントサイドレンダリングを混同してしまいがち。気を付けないとなー。  
あと、なぜかPOSTメソッドもらったらリダイレクトして別のところに飛ばさなきゃという気持ちでいた。普通にhtml返していいんだよ！

DQ初見のひとのDQ3プレイ感想、見てて面白い。  
リメイクにやたらと文句言っちゃいそうだから自分では遊べないけど……。

せなかは相変わらず。

## 24-11-16
25+30呼吸。散歩中のいぬにエンカウント。

背中は相変わらず痛いのう。

Unnamed Space Idle アップデート。おまえ生きてたんか！

## 24-11-15
30+20呼吸。月がきれいだった。

Hono、クライアントサイドスクリプトをいい感じにやるのがむずかしい……のか？  
クライアントコンポーネントとかアイランドアーキテクチャとかいうのが必要なのかも。

昨日かおとといあたりから左の背中が痛いのがずっと続いている。左胸もたまに痛いし。  
基本的には動きに連動して痛むので、寝てる時の姿勢が悪くて変な負荷がかかって肉が傷んでるのかなー。

## 24-11-14
20呼吸。朝のお散歩だったので霜が降りているのを見かけた。冷えてきたねえ。

髪切った！

日の出が0630、日の入りが1617くらいらしい。  
冬至まであと一か月あるから、昼の時間はさらに短くなるのか。

Cloudflare Pages 、アクセスログに悪意のあるやつがいっぱいあるう……。  
.gitとかconfigとかを探している。こわいこわい。

## 24-11-13
0呼吸。おさんぽだけ。

Hono + Cloudflare 、面白そうかも。  
バックエンド側が何をやってるのかさっぱり分からんからホントに面白いのかはわかんないけど。

## 24-11-12
0呼吸！

なーんもやる気でないday2。

## 24-11-11
50呼吸。息をいっぱい吸っておなかを膨らませすぎると持久力に問題が出るっぽい。  
走った後のお散歩で脛肉が痛み始めてわらっちゃった。ダメージに時間差があるんだなあ。

もろもろのことにやる気が出てこなくてぜーんぜんだめ。  
明日はお天気が悪くなるので、その前に外に出たいけれども……。夜更かししそう。

11/13に無印良品のチョコの新しいのが出て、ラインナップにぱちぱちきゃんでぃ入りのもあるんですって。やったぜ。

## 24-11-10
30+20呼吸。今日は息がしんどくなるほうが早かった。うーん。  
つま先で着地するとき、足が前に出すぎてつっかえ棒みたいな形になっていたのを改めた。昨日よりはましだったはず。

お金下ろそうと思ってたのに、向かったATMが土日営業じゃなくて土曜営業・日祝休という失態。

## 24-11-09
30+40呼吸。息切れよりも足が痛くてしんどくなるほうが早いなー。  
なんだか足運びというか、体の使い方が全然しっくりこない。

去年に引き続き雪虫大量発生と思いきやそうでもなかった件、どうやら天敵にやられまくっていたらしい説が新聞に。  
来年以降も雪虫が少ないとよいのだけど。

### javascript
```javascript
Object.getOwnPropertyNames( Class ) // 静的クラス変数とか。
Object.getOwnPropertyNames( Class.prototype ) // クラスメソッド。
Object.getOwnPropertyNames( new Class ) // クラスプロパティ。というか、インスタンスのプロパティ？
```
めもめも。

## 24-11-08
15+20呼吸だったっけ……？

[異世界美少女受肉おじさんと](https://cycomi.com/title/138)  
無料公開中だっていうから読み始めたら止まらなくて全部読んじゃった。

## 24-11-07
20+40呼吸。筋肉痛まだちょっと残ってるけど筋を伸ばさない限りは気にならない感じ。積もってはいないけど雪降ってた。

ちょっと体調崩してたのか、睡眠時間がえらいことなった。  
本ぜんぜん読めてないや。

## 24-11-06
15+20呼吸。まだ筋肉痛はなおらない。よわすぎない？

とらんぷさんおめでと！

バトル鉛筆ちょっと進めた。

今日はあられが降り、明日は雪が降る……らしい。冬だねえ。

## 24-11-05
0呼吸。お散歩だけ。筋肉痛続いてるなー。

『遅刻の誕生』よみはじめ。日本人は明治初期くらいまでぜんぜん時間にきっちりしてないって外国のひとに書かれるくらいだったんだって。意外。  
日の長さを基準にする非定時法だったのが定時法になったり、時間に厳しくなるきっかけになったのが鉄道だとか。

[【求ム】貞操逆転世界の婚活ヒトオスVTuber【清楚系】 - カクヨム](https://kakuyomu.jp/works/16817139558545989267)  
あまりにもエロコメディの勢いが強すぎる。すき。

## 24-11-04
15呼吸。筋肉痛だーっ。

SF6、今日はMR1612でおわり。久しぶりにやると延々やってしまう……！

『獣名源』よみおわり。  
けっこう本当かなあ……と思うようなのはいっぱいあるけど、広辞苑とか大言海の語源が間違ってそうなのも結構ある。諸説紛々というやつであるなあ。  
著者はかなり広辞苑とかの語源に腹を立てている感じがある。適当言ってんじゃねー！！ってかんじで。

## 24-11-03
10+35+15呼吸。走り方を変えたらちょっと速度が出るようになったけど、速度を求めてはおらんのや……。あんまり遠くへ行く気はないし。  
ちょっと長く走ったせいかふくらはぎが張っている。

ときどさんvsれしゃーさん、すごいな。SFLでのチームメイトが決勝戦に。

昨晩は中途覚醒なしで、夜寝て朝起きるという睡眠がとれていた。happy。

## 24-11-02
36呼吸。ジョギングとランニングの違いは速度で、7km/hよりゆっくりか否か……らしい。境界線は6.5だったり8だったりで幅広い。

読書はそろそろスパートをかけないといかん。

SF6、MR1500前後ではベガとケンとテリーが多く感じた。  
ひさびさに1500を割り込んだりで、なかなかｳｰﾝという戦果。

### Wiz Daphne
青銅試練突破！　Lv30から一気にLv38にジャンプアップし、獲得経験値がガタ落ちした。  
記憶が確かなら半分以下というか三分の一以下というか、けっこうひどい数字になっている。

複数獲得が想定されていない宝箱の問題をそのうち治して回収します！と言われても、どれがそれなのかわかんないんだよな～！


## 24-11-01
35呼吸。

うぃずだふね、イベント報酬が結構がっかり。  
いろんなバグで動けない人を気にして報酬を控えめにしたのかなー。

SF6、act6スタート。久々に遊んだらすごいぐだぐだ……。

バトル鉛筆またちょっとすすめた。